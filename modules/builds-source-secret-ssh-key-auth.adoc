// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>
//* assembly/builds

// Base the file name and the ID on the module title. For example:
// * file name: doing-procedure-a.adoc
// * ID: [id='doing-procedure-a']
// * Title: = Doing procedure A

[id='source-secrets-ssh-key-auth-{context}']
= Source code SSH key authentication

The repository keys are usually located in the *_$HOME/.ssh/_* directory, and
are named `id_dsa.pub`, `id_ecdsa.pub`, `id_ed25519.pub`, or `id_rsa.pub` by
default.

. Prerequisites

* SSH key based authentication requires a private SSH key.

.Procedure

[NOTE]
====
Creating a passphrase for the SSH key prevents {product-title} from building.
When prompted for a passphrase, leave it blank.
====

Two files are created: the public key and a corresponding private key (one of
`id_dsa`, `id_ecdsa`, `id_ed25519`, or `id_rsa`). With both of these in place,
consult your source control management (SCM) system's manual on how to upload
the public key. The private key is used to access your private repository.

. Generate SSH key credentials:

----
$ ssh-keygen -t rsa -C "your_email@example.com"
----

. Before using the SSH key to access the private repository, create the secret:

----
$ oc create secret generic <secret_name> \
    --from-file=ssh-privatekey=<path/to/ssh/private/key> \
    --type=kubernetes.io/ssh-auth
----
